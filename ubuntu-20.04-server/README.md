# Ubuntu 20.04 Server 安装配置

## 确认必备条件

1. **网络**：确保网络为正式使用网络；
2. **时间**：确保设备主板时间为UTC标准时间，即比北京时间早8小时。如果北京时间为2019-04-17 10:31:58，则主板时间应为2019-04-17 02:31:58；
3. **硬盘**：确保设备只有一块硬盘可用，如有多的硬盘应拔掉或在主板中禁用。确保硬盘全新，如已用过请先删除所有分区！

## 下载镜像

访问[网易镜像](http://mirrors.163.com/ubuntu-releases/20.04/)下载`ubuntu-20.04.数字-live-server-amd64.iso`
> 官方会定期升级，升级之后`数字`会变化。

## 制作安装盘

准备一个里面没有数据，容量在4GB以上的U盘，用来制作安装盘。

1. [下载并安装软件Rufus](https://rufus.ie/)；
2. 将U盘插入电脑，打开Rufus，**设备**选择插入的U盘，**引导类型选择**点右边**选择**按钮，选择镜像`ubuntu-20.04.数字-live-server-amd64.iso`；
3. 点击下方**开始**按钮开始制作系统安装盘，完成后关闭软件，安全卸载U盘。

## 安装配置

1. 将安装盘插入需要安装系统的设备背面的USB孔中；
2. 设备开机，出现第一个画面时按F12键（不同主板方式略有区别），进入启动设备选择界面，按键盘的上下箭头键选中插入的U盘，按enter键；
3. 显示器会闪烁几次进入一个黑色背景有白色方框的界面，按enter键；
4. 显示器会进入Language选择界面，按enter键；

![](01.png)

![](02.png)

![](03.png)

![](04.png)

> 提示：如需手动设置IP，[转到手动设置IP章节](###手动设置IP)

![](05.png)

![](06.png)

> 注意：文本框中地址已经修改！

![](07.png)

![](08.png)

![](09.png)

![](10.png)

> 注意：除了**Your server's name**可以自由设置外，其它都设为`u`！否则后续设置会报错！！

![](11.png)

> 注意：按键盘的上下箭头键让**Install OpenSSH server**高亮，然后按空格键选中它！！

![](12.png)

![](13.png)

![](14.png)

> 提示：等待，直到出现**Reboot Now**按钮，按enter键。

![](15.png)

> 提示：拔掉安装盘（就是U盘），按enter键。

![](16.png)

> 提示：等待，直到出现**END SSH HOST KEY KEYS**，表示安装已经完成。

---

## 测试

直接输入`u`，按enter键。再次输入`u`，按enter键。则会出现下面画面：

![](TEST01.png)

确认**IPv4 address for 编码**后的IP是否正确。确认无误后输入`exit`，按enter键。

至此安装已经完成，可以回到自己电脑上进行后续操作。

---

## 优化

默认状态下系统设置不能发挥最佳性能，需要进行优化。

1. [下载脚本](o.sh)，使用scp将其传到服务器中；
2. 使用ssh连接服务器

执行下面命令：
```
sh o.sh
```
> 提示`[sudo] password for u:`时输入密码`u`，按enter键。

执行下面命令：
```
sudo reboot
```
> 服务器会重启并应用优化。

再次使用ssh连接服务器，执行下面命令：
```
ulimit -a
```
> 输出的内容中`open files`右边数字为`1048576`说明优化成功。

执行下面命令，清理临时文件：
```
rm o.sh
```

---

## 附加

### 手动设置IP

![](IP01.png)

![](IP02.png)

> 注意：按照网管说明设置，一旦设错后期修改比较麻烦！

![](IP03.png)